[gd_scene load_steps=19 format=3 uid="uid://bof05ivffmn5u"]

[ext_resource type="Script" uid="uid://s5pbhuqwkwq4" path="res://scripts/Main.gd" id="1"]
[ext_resource type="TileSet" uid="uid://tayrg5g1nh5u" path="res://tiles/Sprites.tileset.tres" id="2"]
[ext_resource type="PackedScene" path="res://scenes/Player.tscn" id="3"]
[ext_resource type="Script" uid="uid://chd0omw48s33h" path="res://scripts/PixelScaler.gd" id="4"]
[ext_resource type="FontFile" path="res://assets/m5x7.ttf" id="5"]
[ext_resource type="FontFile" uid="uid://lcsi3iekfbl5" path="res://assets/DungeonFont.ttf" id="6"]
[ext_resource type="Texture2D" uid="uid://bhg4ca6sfvhf4" path="res://assets/CoB-title.png" id="7"]
[ext_resource type="Texture2D" path="res://assets/cob-title-mb.png" id="18"]
[ext_resource type="Texture2D" uid="uid://c2rxob573x2am" path="res://assets/codex-quest-win.png" id="8"]
[ext_resource type="Texture2D" uid="uid://l3gvmh8f4b6k" path="res://assets/codex-quest-lose.png" id="9"]
[ext_resource type="Script" uid="uid://by1ivrwoxrbkv" path="res://scripts/Item.gd" id="17"]

[sub_resource type="LabelSettings" id="1"]
font = ExtResource("6")
font_size = 84
shadow_size = 2
shadow_color = Color(0, 0, 0, 0.65)
shadow_offset = Vector2(2, 2)

[sub_resource type="StyleBoxFlat" id="2"]
draw_center = false
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="3"]
draw_center = false
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="4"]
draw_center = false
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="5"]
draw_center = false
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="6"]
draw_center = false
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="7"]
draw_center = false
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[sub_resource type="StyleBoxFlat" id="8"]
draw_center = false
bg_color = Color(0, 0, 0, 0)
border_width_left = 1
border_width_top = 1
border_width_right = 1
border_width_bottom = 1
border_color = Color(0, 0, 0, 1)

[node name="Main" type="Node2D"]
script = ExtResource("1")

[node name="Background" type="ColorRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0.0666667, 0.0666667, 0.0666667, 1)

[node name="Floor" type="TileMap" parent="."]
tile_set = ExtResource("2")
format = 2

[node name="Decor" type="Node2D" parent="."]

[node name="Walls" type="TileMap" parent="."]
tile_set = ExtResource("2")
format = 2

[node name="Door" type="Node2D" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="Door"]
centered = false

[node name="EntranceDoor" type="Node2D" parent="."]

[node name="Sprite2D" type="Sprite2D" parent="EntranceDoor"]
centered = false

[node name="Player" parent="." instance=ExtResource("3")]

[node name="PixelScaler" type="Node" parent="."]
script = ExtResource("4")

[node name="HUD" type="CanvasLayer" parent="."]

[node name="HUDBG" type="ColorRect" parent="HUD"]
z_index = -1
anchors_preset = 10
anchor_right = 1.0
offset_bottom = 64.0
grow_horizontal = 2
color = Color(0, 0, 0, 0.5)

[node name="HUDBar" type="HBoxContainer" parent="HUD"]
anchors_preset = 10
anchor_right = 1.0
offset_left = 8.0
offset_right = -8.0
offset_bottom = 64.0
grow_horizontal = 2
size_flags_vertical = 4
theme_override_constants/separation = 8

[node name="HUDVitals" type="VBoxContainer" parent="HUD/HUDBar"]
custom_minimum_size = Vector2(220, 64)
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 4
alignment = 1
theme_override_constants/separation = 0

[node name="HeartsBorder" type="PanelContainer" parent="HUD/HUDBar/HUDVitals"]
custom_minimum_size = Vector2(220, 28)
layout_mode = 2
size_flags_vertical = 4
theme_override_styles/panel = SubResource("2")

[node name="Hearts" type="HBoxContainer" parent="HUD/HUDBar/HUDVitals/HeartsBorder"]
custom_minimum_size = Vector2(220, 28)
layout_mode = 2
size_flags_vertical = 4
theme_override_constants/separation = 6

[node name="ArmorBorder" type="PanelContainer" parent="HUD/HUDBar/HUDVitals"]
custom_minimum_size = Vector2(220, 28)
layout_mode = 2
size_flags_vertical = 4
theme_override_styles/panel = SubResource("3")

[node name="Armor" type="HBoxContainer" parent="HUD/HUDBar/HUDVitals/ArmorBorder"]
custom_minimum_size = Vector2(220, 28)
layout_mode = 2
size_flags_vertical = 4
theme_override_constants/separation = 6

[node name="HUDTextGroup" type="PanelContainer" parent="HUD/HUDBar"]
custom_minimum_size = Vector2(220, 64)
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 4
theme_override_styles/panel = SubResource("4")

[node name="HUDTextGrid" type="GridContainer" parent="HUD/HUDBar/HUDTextGroup"]
layout_mode = 2
columns = 3
h_separation = 4
v_separation = 0
size_flags_vertical = 4

[node name="HUDLevel" type="Label" parent="HUD/HUDBar/HUDTextGroup/HUDTextGrid"]
custom_minimum_size = Vector2(72, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("5")
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_font_sizes/font_size = 28
theme_override_styles/normal = SubResource("5")
text = "FLR: 1"
horizontal_alignment = 0
vertical_alignment = 1
size_flags_vertical = 4

[node name="HUDATKLabel" type="Label" parent="HUD/HUDBar/HUDTextGroup/HUDTextGrid"]
custom_minimum_size = Vector2(72, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("5")
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_font_sizes/font_size = 28
theme_override_styles/normal = SubResource("6")
text = "ATK: 0"
horizontal_alignment = 0
vertical_alignment = 1
size_flags_vertical = 4

[node name="HUDDEFLabel" type="Label" parent="HUD/HUDBar/HUDTextGroup/HUDTextGrid"]
custom_minimum_size = Vector2(72, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("5")
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_font_sizes/font_size = 28
theme_override_styles/normal = SubResource("7")
text = "DEF: 0"
horizontal_alignment = 0
vertical_alignment = 1
size_flags_vertical = 4

[node name="HUDArrows" type="Label" parent="HUD/HUDBar/HUDTextGroup/HUDTextGrid"]
custom_minimum_size = Vector2(72, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("5")
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_font_sizes/font_size = 28
theme_override_styles/normal = SubResource("8")
text = "ARR: 0"
horizontal_alignment = 0
vertical_alignment = 1
size_flags_vertical = 4

[node name="HUDPlayerLevel" type="Label" parent="HUD/HUDBar/HUDTextGroup/HUDTextGrid"]
custom_minimum_size = Vector2(72, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("5")
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_font_sizes/font_size = 28
theme_override_styles/normal = SubResource("8")
text = "LVL: 0"
horizontal_alignment = 0
vertical_alignment = 1
size_flags_vertical = 4

[node name="HUDScore" type="Label" parent="HUD/HUDBar/HUDTextGroup/HUDTextGrid"]
custom_minimum_size = Vector2(72, 30)
layout_mode = 2
theme_override_fonts/font = ExtResource("5")
theme_override_colors/font_color = Color(1, 1, 1, 1)
theme_override_font_sizes/font_size = 28
theme_override_styles/normal = SubResource("8")
text = "EXP: 0"
horizontal_alignment = 0
vertical_alignment = 1
size_flags_vertical = 4

[node name="HUDItems" type="PanelContainer" parent="HUD/HUDBar"]
custom_minimum_size = Vector2(320, 64)
layout_mode = 2
size_flags_horizontal = 0
size_flags_vertical = 4
theme_override_styles/panel = SubResource("4")

[node name="HUDItemsContainer" type="GridContainer" parent="HUD/HUDBar/HUDItems"]
custom_minimum_size = Vector2(320, 64)
layout_mode = 2
columns = 8
h_separation = 4
v_separation = 4
size_flags_vertical = 4

[node name="HUDKey1Icon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDKey2Icon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDKey3Icon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDSwordIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDShieldIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDCodexIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDCrownIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDRune1Icon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDRune2Icon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDRune3Icon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDTorchIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDRingIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDPotionIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDBowSlot" type="PanelContainer" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(30, 30)
layout_mode = 2
size_flags_vertical = 4

[node name="HUDBowIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer/HUDBowSlot"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2

[node name="HUDWandSlot" type="PanelContainer" parent="HUD/HUDBar/HUDItems/HUDItemsContainer"]
custom_minimum_size = Vector2(30, 30)
layout_mode = 2
size_flags_vertical = 4

[node name="HUDWandIcon" type="TextureRect" parent="HUD/HUDBar/HUDItems/HUDItemsContainer/HUDWandSlot"]
custom_minimum_size = Vector2(28, 28)
layout_mode = 2
size_flags_vertical = 4
expand_mode = 1
stretch_mode = 5
mouse_filter = 2
[node name="Fade" type="ColorRect" parent="HUD"]
z_index = 100
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0)

[node name="HUDLineBottom" type="ColorRect" parent="HUD"]
anchors_preset = 10
anchor_right = 1.0
offset_top = 61.0
offset_bottom = 64.0
grow_horizontal = 2
color = Color(0.4, 0.4, 0.4, 1)

[node name="Title" type="CanvasLayer" parent="."]

[node name="TitleBG" type="TextureRect" parent="Title"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("7")
stretch_mode = 5
expand = true

[node name="TitleLabel" type="Label" parent="Title"]
z_index = 200
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("6")
text = "Press Enter to start"
label_settings = SubResource("1")
horizontal_alignment = 1
vertical_alignment = 1

[node name="GameOver" type="CanvasLayer" parent="."]

[node name="OverBGWin" type="TextureRect" parent="GameOver"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("8")
stretch_mode = 5
expand = true

[node name="OverBGLose" type="TextureRect" parent="GameOver"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
texture = ExtResource("9")
stretch_mode = 5
expand = true

[node name="OverLabel" type="Label" parent="GameOver"]
z_index = 200
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("6")
text = "Press Enter to restart"
horizontal_alignment = 1
vertical_alignment = 1

[node name="OverScore" type="Label" parent="GameOver"]
z_index = 200
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_top = -48.0
grow_horizontal = 2
grow_vertical = 2
theme_override_fonts/font = ExtResource("6")
horizontal_alignment = 1
vertical_alignment = 1

[node name="Key" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="Key"]
centered = false

[node name="Sword" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="Sword"]
centered = false

[node name="Shield" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="Shield"]
centered = false

[node name="Potion" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="Potion"]
centered = false

[node name="Codex" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="Codex"]
centered = false

[node name="Bow" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="Bow"]
centered = false

[node name="Wand" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="Wand"]
centered = false

[node name="ArrowPickup" type="Node2D" parent="."]
script = ExtResource("17")

[node name="Sprite2D" type="Sprite2D" parent="ArrowPickup"]
centered = false
